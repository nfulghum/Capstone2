{"ast":null,"code":"var _jsxFileName = \"/Users/nick/Documents/SpringBoard_SWE/Capstone2/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport UserContext from './components/Auth/UserContext';\nimport ResolutionApi from './api';\nimport LoadingSpinner from './components/interface/LoadingSpinner';\nimport jwt_decode from 'jwt-decode';\nimport useLocalStorage from './hooks/useLocalStorage';\nimport AppRoutes from './routes/AppRoutes';\nimport Navigation from './components/interface/Navigation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TOKEN_STORAGE_ID = 'resolution-token';\nfunction App() {\n  _s();\n  const [infoLoaded, setInfoLoaded] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID);\n  console.debug(\"App\", \"infoLoaded=\", infoLoaded, \"currentUser=\", currentUser, \"token=\", token);\n  useEffect(function loadUserInfo() {\n    async function getCurrentUser() {\n      if (token) {\n        try {\n          let {\n            username\n          } = jwt_decode(token);\n          ResolutionApi.token = token;\n          let currentUser = await ResolutionApi.getCurrentUser(username);\n          setCurrentUser(currentUser);\n        } catch (e) {\n          setCurrentUser(null);\n        }\n      }\n      setInfoLoaded(true);\n    }\n    setInfoLoaded(false);\n    getCurrentUser();\n  }, [token]);\n  const logout = () => {\n    setCurrentUser(null);\n    setToken(null);\n  };\n  async function signup(signupData) {\n    try {\n      let token = await ResolutionApi.signup(signupData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (e) {\n      console.error(\"signup failed\", e);\n      return {\n        success: false,\n        e\n      };\n    }\n  }\n  ;\n  async function login(loginData) {\n    try {\n      let token = await ResolutionApi.login(loginData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (e) {\n      return {\n        success: false,\n        e\n      };\n    }\n  }\n  ;\n  if (!infoLoaded) return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 27\n  }, this);\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n      value: {\n        currentUser,\n        setCurrentUser\n      },\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppRoutes, {\n        login: login,\n        signup: signup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"r2zUiwL7+rY/nY4IxCQHgAfLP6I=\", false, function () {\n  return [useLocalStorage];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","UserContext","ResolutionApi","LoadingSpinner","jwt_decode","useLocalStorage","AppRoutes","Navigation","TOKEN_STORAGE_ID","App","infoLoaded","setInfoLoaded","currentUser","setCurrentUser","token","setToken","console","debug","loadUserInfo","getCurrentUser","username","e","logout","signup","signupData","success","error","login","loginData"],"sources":["/Users/nick/Documents/SpringBoard_SWE/Capstone2/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport UserContext from './components/Auth/UserContext';\nimport ResolutionApi from './api';\nimport LoadingSpinner from './components/interface/LoadingSpinner';\nimport jwt_decode from 'jwt-decode';\nimport useLocalStorage from './hooks/useLocalStorage';\nimport AppRoutes from './routes/AppRoutes';\nimport Navigation from './components/interface/Navigation';\n\nexport const TOKEN_STORAGE_ID = 'resolution-token';\n\n\n\nfunction App() {\n\n  const [infoLoaded, setInfoLoaded] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID);\n\n\n\n  console.debug(\n    \"App\",\n    \"infoLoaded=\", infoLoaded,\n    \"currentUser=\", currentUser,\n    \"token=\", token,\n  );\n\n  useEffect(function loadUserInfo() {\n    async function getCurrentUser() {\n      if (token) {\n        try {\n          let { username } = jwt_decode(token);\n          ResolutionApi.token = token;\n          let currentUser = await ResolutionApi.getCurrentUser(username);\n          setCurrentUser(currentUser);\n        } catch (e) {\n          setCurrentUser(null);\n        }\n      }\n      setInfoLoaded(true);\n    }\n    setInfoLoaded(false);\n    getCurrentUser();\n  }, [token]);\n\n  const logout = () => {\n    setCurrentUser(null);\n    setToken(null);\n  }\n\n  async function signup(signupData) {\n    try {\n      let token = await ResolutionApi.signup(signupData);\n      setToken(token);\n      return { success: true };\n    } catch (e) {\n      console.error(\"signup failed\", e)\n      return { success: false, e };\n    }\n  };\n\n  async function login(loginData) {\n    try {\n      let token = await ResolutionApi.login(loginData);\n      setToken(token);\n      return { success: true };\n    } catch (e) {\n      return { success: false, e };\n    }\n  };\n\n\n  if (!infoLoaded) return <LoadingSpinner />\n\n  return (\n\n    <BrowserRouter>\n      <UserContext.Provider value={{ currentUser, setCurrentUser }}>\n        <Navigation logout={logout} />\n        <AppRoutes login={login} signup={signup} />\n      </UserContext.Provider>\n    </BrowserRouter>\n\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,QAAQ,kBAAkB;AAChD,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,aAAa,MAAM,OAAO;AACjC,OAAOC,cAAc,MAAM,uCAAuC;AAClE,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,eAAe,MAAM,yBAAyB;AACrD,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,UAAU,MAAM,mCAAmC;AAAC;AAE3D,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAIlD,SAASC,GAAG,GAAG;EAAA;EAEb,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGV,eAAe,CAACG,gBAAgB,CAAC;EAI3DQ,OAAO,CAACC,KAAK,CACX,KAAK,EACL,aAAa,EAAEP,UAAU,EACzB,cAAc,EAAEE,WAAW,EAC3B,QAAQ,EAAEE,KAAK,CAChB;EAEDf,SAAS,CAAC,SAASmB,YAAY,GAAG;IAChC,eAAeC,cAAc,GAAG;MAC9B,IAAIL,KAAK,EAAE;QACT,IAAI;UACF,IAAI;YAAEM;UAAS,CAAC,GAAGhB,UAAU,CAACU,KAAK,CAAC;UACpCZ,aAAa,CAACY,KAAK,GAAGA,KAAK;UAC3B,IAAIF,WAAW,GAAG,MAAMV,aAAa,CAACiB,cAAc,CAACC,QAAQ,CAAC;UAC9DP,cAAc,CAACD,WAAW,CAAC;QAC7B,CAAC,CAAC,OAAOS,CAAC,EAAE;UACVR,cAAc,CAAC,IAAI,CAAC;QACtB;MACF;MACAF,aAAa,CAAC,IAAI,CAAC;IACrB;IACAA,aAAa,CAAC,KAAK,CAAC;IACpBQ,cAAc,EAAE;EAClB,CAAC,EAAE,CAACL,KAAK,CAAC,CAAC;EAEX,MAAMQ,MAAM,GAAG,MAAM;IACnBT,cAAc,CAAC,IAAI,CAAC;IACpBE,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EAED,eAAeQ,MAAM,CAACC,UAAU,EAAE;IAChC,IAAI;MACF,IAAIV,KAAK,GAAG,MAAMZ,aAAa,CAACqB,MAAM,CAACC,UAAU,CAAC;MAClDT,QAAQ,CAACD,KAAK,CAAC;MACf,OAAO;QAAEW,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOJ,CAAC,EAAE;MACVL,OAAO,CAACU,KAAK,CAAC,eAAe,EAAEL,CAAC,CAAC;MACjC,OAAO;QAAEI,OAAO,EAAE,KAAK;QAAEJ;MAAE,CAAC;IAC9B;EACF;EAAC;EAED,eAAeM,KAAK,CAACC,SAAS,EAAE;IAC9B,IAAI;MACF,IAAId,KAAK,GAAG,MAAMZ,aAAa,CAACyB,KAAK,CAACC,SAAS,CAAC;MAChDb,QAAQ,CAACD,KAAK,CAAC;MACf,OAAO;QAAEW,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOJ,CAAC,EAAE;MACV,OAAO;QAAEI,OAAO,EAAE,KAAK;QAAEJ;MAAE,CAAC;IAC9B;EACF;EAAC;EAGD,IAAI,CAACX,UAAU,EAAE,oBAAO,QAAC,cAAc;IAAA;IAAA;IAAA;EAAA,QAAG;EAE1C,oBAEE,QAAC,aAAa;IAAA,uBACZ,QAAC,WAAW,CAAC,QAAQ;MAAC,KAAK,EAAE;QAAEE,WAAW;QAAEC;MAAe,CAAE;MAAA,wBAC3D,QAAC,UAAU;QAAC,MAAM,EAAES;MAAO;QAAA;QAAA;QAAA;MAAA,QAAG,eAC9B,QAAC,SAAS;QAAC,KAAK,EAAEK,KAAM;QAAC,MAAM,EAAEJ;MAAO;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA;EACtB;IAAA;IAAA;IAAA;EAAA,QACT;AAGpB;AAAC,GAxEQd,GAAG;EAAA,QAIgBJ,eAAe;AAAA;AAAA,KAJlCI,GAAG;AA0EZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}