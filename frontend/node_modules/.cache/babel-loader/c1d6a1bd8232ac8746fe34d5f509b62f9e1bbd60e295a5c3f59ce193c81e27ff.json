{"ast":null,"code":"import axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:3001';\nclass ResolutionApi {\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'get';\n    // console.debug('API Call:', endpoint, data, method);\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${ResolutionApi.token}`\n    };\n    const params = method === 'get' ? data : {};\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error('API Error:', err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  /** Individual API routes */\n\n  /**Get token for login from username, password */\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, 'post');\n    return res.token;\n  }\n\n  /** Sign up for site */\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, 'post');\n    return res.token;\n  }\n\n  /** Get the current user */\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  /** Edit user profile and save it */\n\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, 'patch');\n    return res.user;\n  }\n\n  /** Get list exercises (filtered by params if given) */\n\n  static async getExerciseData(data) {\n    let res = await this.request(`exercises`, data, 'post');\n    return res;\n  }\n\n  /** Get meal plan */\n\n  static async generateMealPlan(data) {\n    let res = await this.request(`meals`, data, 'post');\n    return res;\n  }\n\n  /** Save meal plan */\n\n  static async saveMealPlan(username) {\n    let res = await this.request(`users/${username}/meals`, {}, 'post');\n    return res;\n  }\n}\nexport default ResolutionApi;","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","ResolutionApi","request","endpoint","data","method","url","headers","Authorization","token","params","err","console","error","response","message","Array","isArray","login","res","signup","getCurrentUser","username","user","saveProfile","getExerciseData","generateMealPlan","saveMealPlan"],"sources":["/Users/nick/Documents/SpringBoard_SWE/Capstone2/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:3001';\n\n\nclass ResolutionApi {\n    static token;\n\n    static async request(endpoint, data = {}, method = 'get') {\n        // console.debug('API Call:', endpoint, data, method);\n\n        const url = `${BASE_URL}/${endpoint}`;\n        const headers = { Authorization: `Bearer ${ResolutionApi.token}` };\n        const params = (method === 'get')\n            ? data\n            : {};\n        try {\n            return (await axios({ url, method, data, params, headers })).data;\n        } catch (err) {\n            console.error('API Error:', err.response);\n            let message = err.response.data.error.message;\n            throw Array.isArray(message) ? message : [message];\n        }\n    }\n\n    /** Individual API routes */\n\n    /**Get token for login from username, password */\n\n    static async login(data) {\n        let res = await this.request(`auth/token`, data, 'post');\n        return res.token;\n    }\n\n    /** Sign up for site */\n\n    static async signup(data) {\n        let res = await this.request(`auth/register`, data, 'post');\n        return res.token;\n    }\n\n\n    /** Get the current user */\n\n    static async getCurrentUser(username) {\n        let res = await this.request(`users/${username}`);\n        return res.user;\n    }\n\n    /** Edit user profile and save it */\n\n    static async saveProfile(username, data) {\n        let res = await this.request(`users/${username}`, data, 'patch');\n        return res.user;\n    }\n\n    /** Get list exercises (filtered by params if given) */\n\n    static async getExerciseData(data) {\n        let res = await this.request(`exercises`, data, 'post');\n        return res;\n    }\n\n\n    /** Get meal plan */\n\n    static async generateMealPlan(data) {\n        let res = await this.request(`meals`, data, 'post');\n        return res;\n    }\n\n    /** Save meal plan */\n\n    static async saveMealPlan(username) {\n        let res = await this.request(`users/${username}/meals`, {}, 'post');\n        return res;\n    }\n\n}\n\nexport default ResolutionApi;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,uBAAuB;AAG1E,MAAMC,aAAa,CAAC;EAGhB,aAAaC,OAAO,CAACC,QAAQ,EAA6B;IAAA,IAA3BC,IAAI,uEAAG,CAAC,CAAC;IAAA,IAAEC,MAAM,uEAAG,KAAK;IACpD;;IAEA,MAAMC,GAAG,GAAI,GAAET,QAAS,IAAGM,QAAS,EAAC;IACrC,MAAMI,OAAO,GAAG;MAAEC,aAAa,EAAG,UAASP,aAAa,CAACQ,KAAM;IAAE,CAAC;IAClE,MAAMC,MAAM,GAAIL,MAAM,KAAK,KAAK,GAC1BD,IAAI,GACJ,CAAC,CAAC;IACR,IAAI;MACA,OAAO,CAAC,MAAMR,KAAK,CAAC;QAAEU,GAAG;QAAED,MAAM;QAAED,IAAI;QAAEM,MAAM;QAAEH;MAAQ,CAAC,CAAC,EAAEH,IAAI;IACrE,CAAC,CAAC,OAAOO,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,YAAY,EAAEF,GAAG,CAACG,QAAQ,CAAC;MACzC,IAAIC,OAAO,GAAGJ,GAAG,CAACG,QAAQ,CAACV,IAAI,CAACS,KAAK,CAACE,OAAO;MAC7C,MAAMC,KAAK,CAACC,OAAO,CAACF,OAAO,CAAC,GAAGA,OAAO,GAAG,CAACA,OAAO,CAAC;IACtD;EACJ;;EAEA;;EAEA;;EAEA,aAAaG,KAAK,CAACd,IAAI,EAAE;IACrB,IAAIe,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,YAAW,EAAEE,IAAI,EAAE,MAAM,CAAC;IACxD,OAAOe,GAAG,CAACV,KAAK;EACpB;;EAEA;;EAEA,aAAaW,MAAM,CAAChB,IAAI,EAAE;IACtB,IAAIe,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,eAAc,EAAEE,IAAI,EAAE,MAAM,CAAC;IAC3D,OAAOe,GAAG,CAACV,KAAK;EACpB;;EAGA;;EAEA,aAAaY,cAAc,CAACC,QAAQ,EAAE;IAClC,IAAIH,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,SAAQoB,QAAS,EAAC,CAAC;IACjD,OAAOH,GAAG,CAACI,IAAI;EACnB;;EAEA;;EAEA,aAAaC,WAAW,CAACF,QAAQ,EAAElB,IAAI,EAAE;IACrC,IAAIe,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,SAAQoB,QAAS,EAAC,EAAElB,IAAI,EAAE,OAAO,CAAC;IAChE,OAAOe,GAAG,CAACI,IAAI;EACnB;;EAEA;;EAEA,aAAaE,eAAe,CAACrB,IAAI,EAAE;IAC/B,IAAIe,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,WAAU,EAAEE,IAAI,EAAE,MAAM,CAAC;IACvD,OAAOe,GAAG;EACd;;EAGA;;EAEA,aAAaO,gBAAgB,CAACtB,IAAI,EAAE;IAChC,IAAIe,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,OAAM,EAAEE,IAAI,EAAE,MAAM,CAAC;IACnD,OAAOe,GAAG;EACd;;EAEA;;EAEA,aAAaQ,YAAY,CAACL,QAAQ,EAAE;IAChC,IAAIH,GAAG,GAAG,MAAM,IAAI,CAACjB,OAAO,CAAE,SAAQoB,QAAS,QAAO,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC;IACnE,OAAOH,GAAG;EACd;AAEJ;AAEA,eAAelB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}